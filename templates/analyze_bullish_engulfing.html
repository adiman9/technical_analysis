<!DOCTYPE html>
<html>
  <head>
    <title>Analysis</title>
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500" rel="stylesheet">
    <style>
      body {
        font-family: 'Work Sans', sans-serif;
        font-size: 14px;
        font-weight: 300;
        margin: 25px;
      }

      h1, h2, h3, h4, h5 {
        margin: 7px 0;
      }

      h1 {
        font-size: 24px;
        font-weight: 500;
      }

      h2 {
        font-size: 14px;
        font-weight: 400;
      }

      p {
        margin: 6px 0;
      }

      .chart-wrapper {
        padding: 18px 0;
      }

      iframe {
        height: 500px;
        overflow: hidden;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <h1 id="title"></h1>
      <h2>
        <span id="product"></span> |
        <span id="candle-size"></span> candles |
        <span id="start-time"></span> to <span id="end-time"></span> |
        <span id="lookbehind-candles"></span>-candle lookbehind |
        <span id="lookahead-candles"></span>-candle lookahead |
        <span id="allowed-wick-to-body-ratio"></span> max wick-to-body ratio |
        <span id="bullish-engulfing-event-count"></span> events
      </h2>
      <p>
        In this exercise, a bullish engulfing candle is defined as any candle for which 1) the close is greater than the open and equal to the high, 2) the body is taller than each of its preceding <span id="lookbehind-candles-2"></span> candles, and 3) the volume is greater than each of its preceding <span id="lookbehind-candles-3"></span> candles.
      </p>
      <div class="chart-wrapper">
        <div id="probabilities-grouped-bar-chart"></div>
      </div>
    </div>
    <script>
      var title = {title};
      var product = {product};
      var candleSize = {candleSize};
      var startTime = {startTime};
      var endTime = {endTime};
      var lookbehindCandles = {lookbehindCandles};
      var lookaheadCandles = {lookaheadCandles};
      var allowedWickToBodyRatio = {allowedWickToBodyRatio};
      var probabilitiesGroupedBarChartUrl = {probabilitiesGroupedBarChartUrl};
      var events = {events};
      var bullishEngulfingEventCount = {bullishEngulfingEventCount};

      var probabilitiesGroupedBarChartHtml = '<iframe src="' + probabilitiesGroupedBarChartUrl + '.embed" frameborder="0"></iframe>';

      document.getElementById('title').innerHTML = title;
      document.getElementById('product').innerHTML = product;
      document.getElementById('candle-size').innerHTML = candleSize;
      document.getElementById('start-time').innerHTML = startTime;
      document.getElementById('end-time').innerHTML = endTime;
      document.getElementById('lookbehind-candles').innerHTML = lookbehindCandles;
      document.getElementById('lookbehind-candles-2').innerHTML = lookbehindCandles;
      document.getElementById('lookbehind-candles-3').innerHTML = lookbehindCandles;
      document.getElementById('lookahead-candles').innerHTML = lookaheadCandles;
      document.getElementById('allowed-wick-to-body-ratio').innerHTML = (allowedWickToBodyRatio * 100).toFixed(1) + '%';
      document.getElementById('bullish-engulfing-event-count').innerHTML = bullishEngulfingEventCount;
      document.getElementById('probabilities-grouped-bar-chart').innerHTML = probabilitiesGroupedBarChartHtml;

      for (var i = 0; i < events.length; i++) {
        if (events[i].isEngulfingBullish) console.log(events[i]);
      }
    </script>
  </body>
</html>
